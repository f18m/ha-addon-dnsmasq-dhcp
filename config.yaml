---
# inside feature branches it's handy to change the 'version' field to match the branch name
# as reported by the Github Action workflow 'publish.yaml', so that you can force HomeAssistant
# to use the docker image of that feature branch instead of the docker image of 'main', by pointing
# HomeAssistant to that feature branch
version: 1.0.6
slug: dnsmasq-dhcp
name: Dnsmasq-DHCP
description: A DHCP server based on dnsmasq
url: https://github.com/f18m/ha-addon-dnsmasq-dhcp-server/tree/main
advanced: true
arch:
  - armhf
  - armv7
  - aarch64
  - amd64
  - i386
host_network: true
image: ghcr.io/f18m/{arch}-addon-dnsmasq-dhcp
init: false
ingress: true
ingress_port: 8100
options:
  default_lease: 12h
  # the address reservation lease might also be 'infinite'
  address_reservation_lease: 12h
  network:
    broadcast: 192.168.1.255
    gateway: 192.168.1.254
    interface: enp1s0
    netmask: 255.255.255.0
    dns:
      - 8.8.8.8
      - 8.8.4.4
  dhcp_range:
    start_ip: 192.168.1.50
    end_ip: 192.168.1.250
  ip_address_reservations: 
    - mac: aa:bb:cc:dd:ee:ff
      name: "An important host with a static IP address assigned"
      ip: 192.168.1.15
  dhcp_clients_friendly_names:
    - mac: dd:ee:aa:dd:bb:ee
      name: "This is a friendly name to label this host, even if it gets a dynamic IP"

  log_dhcp: true
  log_web_ui: false
schema:
  default_lease: str
  address_reservation_lease: str
  network:
    broadcast: str
    gateway: str
    interface: str
    netmask: str
    dns:
      - str
  dhcp_range:
    start_ip: str
    end_ip: str
  ip_address_reservations:
    - ip: str
      mac: str
      name: str
  dhcp_clients_friendly_names:
    - mac: str
      name: str
  log_dhcp: bool
  log_web_ui: bool
startup: system
privileged:
  - NET_ADMIN

<!DOCTYPE html>
<html>
<head>
    <title>DHCP Clients</title>
    <script type="text/javascript">
        var ws = new WebSocket("wss://{{.WebSocketHost}}/ws");
        console.log("Websocket started successfully")
        ws.onmessage = function(event) {
            var data = JSON.parse(event.data);
            var tableBody = document.getElementById("tableBody");
            tableBody.innerHTML = "";


            if (data === null) {
                console.log("failed to parse the received event data: " + event.data)
            }else {
                console.log("received " + data.length + " items from websocket")
                data.forEach(function(item) {
                    var row = document.createElement("tr");
                    var ipCell = document.createElement("td");
                    var macCell = document.createElement("td");

                    ipCell.textContent = item.IP;
                    macCell.textContent = item.MAC;

                    row.appendChild(ipCell);
                    row.appendChild(macCell);
                    tableBody.appendChild(row);
                });
            }
        };
    </script>
</head>
<body>
    <h1>DHCP Clients</h1>
    <table border="1">
        <thead>
            <tr>
                <th>IP Address</th>
                <th>MAC Address</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- data is dynamically populated here -->
        </tbody>
    </table>
</body>
</html>
